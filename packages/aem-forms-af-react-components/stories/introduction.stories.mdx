import {Meta, Story} from '@storybook/addon-docs';
import {AdaptiveForm} from "@adobe/aem-forms-af-react-renderer";

<Meta title="Adaptive Form/Introduction" component={AdaptiveForm} />

# What is Headless Adaptive Forms

Headless Adaptive Forms (HAF) specifies a mechanism to create a Form or Data Capture Experience using a JSON representation,
which allows rendering that experience across multiple channels.

The Adaptive Forms Specification
can be used by implementors to generate a visual appearance for the Data Capture Experience for multiple channels.

# Modules

The HAF is mainly made up of these components

* A Specification that details how a form with its dynamic behaviour can be represented in JSON.
* A Core Library (@adobe/aem-forms-af-core) that understands the dynamic behaviour and manipulates the state of the Form
without the need of a User Interface.
* An Adaptive Form Super Component that takes the form json and renders it using react spectrum components.

# Getting Started

## Prerequisites

The assumption is that you have node > 16 and npm > 8 installed on your machine and
created a react project (using react version ^16.14.0). There are multiple ways to do that
(create-react-app, webpack, etc.).

Once you have your React project ready you need to install the following dependencies

```
npm i --save @adobe/aem-forms-af-react-renderer @adobe/aem-forms-af-react-components @adobe/react-spectrum
```

## Form JSON

One needs to define The Form in JSON as per the
Specification.

## Mappings Object

A Mappings Object is a JavaScript map that maps the
field types
defined in the Specification to its respective React Component. The Adaptive Form Super Component
uses this map to render the different components defined in the Form JSON.

The default mappings can be found in
git

To use that in your project use the following import, assuming you have added the project as a dependency in your project

```
import {mappings} from '@adobe/aem-forms-af-react-components'
```

Once you have defined the JSON for the form, the code would look like

```
import {mappings} from '@adobe/aem-forms-af-react-components'
const json = {...}
<AdaptiveForm mappings={mappings} formJson={json} />
```

If you are not using React Spectrum then you might need to start your app with the
[React Spectrum Provider](https://react-spectrum.adobe.com/react-spectrum/getting-started.html#setting-up-your-app).

If you are not using Provider at your app level, you can use that with the Adaptive Form Super Component

```
import {mappings} from '@adobe/aem-forms-af-react-components'
import { Provider as Spectrum3Provider, defaultTheme } from '@adobe/react-spectrum'
const json = {...}
<SpectrumProvider theme={defaultTheme}>
<AdaptiveForm mappings={mappings} formJson={json} />
</SpectrumProvider>
```


# Examples

A simple one field form will have the following representation

<Story id="reference-examples--introduction" />


Additional capabilities including submission and multiple fields can be added in the JSON itself. The data can be
extracted out at submit using the callbacks provided by the Adaptive Form Super Component

<Story id="reference-examples--form-data" />


The Form can also generate a hierarchical data

<Story id="reference-examples--nested-data" />


