{
  "$schema" : "https://git.corp.adobe.com/raw/livecycle/af2-docs/gh-pages/schema/adaptive-form.schema.json",
  "data": {},
  "items": {
    "employment_status" : {  
        "name": "employment_status",
        "viewType": "radio-button",
        "title":"Are you currently employed",
        "constraints" : {
            "type": "boolean",
            "options": [{
              "text" : "yes",
              "value" : true
            },{
              "text" : "no",
              "value" : false
            }],
            "required": true
        },
        "constraintMessages": {
            "required": "Your current employment status is mandatory"
        }
    },
    "panel" : {
      "viewType": "panel",
      "name" : "panel",
      "rules" : {
        "visible" : "$form.employment_status.value == true"
      },
      "items" : {
        "employer": {  
            "name": "employer",
            "viewType": "text-input",
            "title":"Employer's Name",
            "rules" : {
              "required" : "$form.employment_status.value == true"
            },
            "constraints" : {
                "type": "string",
                "required": true
            },
            "constraintMessages": {
                "required": "The field is required"
            }
        },
        "employer_address": {
          "name": "employer_address",
          "viewType": "text-input",
          "title":"Employer's Address",
          "multiline"  : true,
          "rules" : {
            "required" : "$form.employment_status.value == true"
          },
          "constraints" : {
            "type": "string",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        },
        "employment_position": {
          "name": "employment_position",
          "viewType": "text-input",
          "title":"Employment Title",
          "rules" : {
            "required" : "$form.employment_status.value == true"
          },
          "constraints" : {
            "type": "string",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        },
        "employment_start_date": {
          "name": "employment_start_date",
          "viewType": "date-input",
          "title":"Employment Start Date",
          "rules" : {
            "required" : "$form.employment_status.value == true"
          },
          "constraints" : {
            "type": "string",
            "format": "date",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        },
        "payment_per_week": {
          "name": "payment_per_week",
          "viewType": "number-input",
          "title":"Weekly Payment Received (after taxes)",
          "description" : "the amount of all payments actually received by you from this employment (after deduction of tax) currently per week?\n(If the amount varies from week to week, state a typical amount.)\n",
          "dataRef": "payment_per_week",
          "rules" : {
            "required" : "$form.employment_status.value == true"
          },
          "constraints" : {
            "type": "number",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        }
      }
    },
    "last_employment_end_date" : {
        "name": "last_employment_end_date",
        "viewType": "text-input",
        "title":"On what date did your last period of employment end?",
        "dataRef": "last_employment_end_date",
        "constraints" : {
            "type": "string",
            "format" : "date",
            "required": true
        }
    },
    "self_employed" : {
      "name": "self_employed",
      "viewType": "radio-button",
      "title":"Are you self employed",
      "constraints" : {
        "type": "boolean",
        "options": [{
          "text" : "yes",
          "value" : true
        },{
          "text" : "no",
          "value" : false
        }],
        "required": true
      },
      "constraintMessages": {
        "required": "Your current employment status is mandatory"
      }
    },
    "self_employment_details" : {
      "viewType": "panel",
      "name" : "self_employment_details",
      "rules" : {
        "visible" : "$form.self_employed.value == true"
      },
      "items" : {
        "occupation": {
          "name": "employer",
          "viewType": "text-input",
          "title":"Employer's Name",
          "dataRef": "employer",
          "rules" : {
            "required" : "$form.self_employed.value == true"
          },
          "constraints" : {
            "type": "string",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        },
        "expenses_last_year": {
          "name": "expenses_last_year",
          "viewType": "number-input",
          "title":"Expenditure in last financial year",
          "description" : "the total amount of expenditure incurred by you in earning income during that financial year",
          "dataRef": "expenses_last_year",
          "rules" : {
            "required" : "$form.self_employed.value == true"
          },
          "constraints" : {
            "type": "number",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        },
        "salary_last_year": {
          "name": "salary_last_year",
          "viewType": "number-input",
          "title":"Weekly Payment Received (after taxes)",
          "description" : "â€¢\tthe total amount received by you as a self-employed person during the last financial year",
          "rules" : {
            "required" : "$form.self_employed.value == true"
          },
          "constraints" : {
            "type": "number",
            "required": true
          },
          "constraintMessages": {
            "required": "The field is required"
          }
        }
      }
    },
    "submit": {
      "name": "submit",
      "viewType": "button",
      "title": "Submit",
      "screenReaderText": "Enter your message in less than 1000 characters and minimum 50 characters",
      "events": {
        "click": "dispatch_event($form, 'submit')"
      }
    }
  },
  "events": {
    "submit" : "submit_form('submitSuccess', 'submitError')",
    "submitSuccess": "show_message_box($form.thankyouMessage)"
  },
  "thankyouMessage": "Thank you for submitting the form",
  "metadata":{
      "grammar" : "jsonformula-af",
      "locale" : "en-us"
  }
}
